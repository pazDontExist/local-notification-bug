"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4851],{4851:(f,u,t)=>{t.r(u),t.d(u,{HomePageModule:()=>P});var r=t(6895),p=t(433),i=t(8058),g=t(7469),h=t(655),s=t(6916),l=t(8042),e=t(8274),d=t(5014);const v=[{path:"",component:(()=>{class o{constructor(n,a){this.storage=n,this.router=a,this.statusText="initing.."}ngOnInit(){this.appVersion=s.N.appVersion,this.performManualUpdate()}performManualUpdate(){return(0,h.mG)(this,void 0,void 0,function*(){this.statusText="Controllando aggiornamenti...";const n=yield l.Deploy.checkForUpdate();console.log(n),n.available?(yield l.Deploy.downloadUpdate(a=>{this.statusText="Download: "+a+" %",console.log(a)}),yield l.Deploy.extractUpdate(a=>{this.statusText="Installazione: "+a+" %"}),l.Deploy.reloadApp()):(console.log("No Update"),this.statusText="Nessun Aggiornamento trovato",this.redirect())})}redirect(){let n;this.storage.get("access_token")||this.router.navigate(["/login"]),this.storage.get("access_token").then(a=>{n=a,this.router.navigate(n.length>0?["/dashboard"]:["/login"])})}handleRefresh(n){setTimeout(()=>{this.performManualUpdate(),event.target.complete()},2e3)}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(d.V),e.Y36(g.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-home"]],decls:11,vars:2,consts:[[1,"splash-background"],["slot","fixed",3,"ionRefresh"],[1,"container"],[1,"logo","animated","fadeInUp"],[1,"logo-image"],["src","../../assets/mental-space-logo/png/logo.png",1,"width-100"],[1,"below-text"],[1,"company-logo"]],template:function(n,a){1&n&&(e.TgZ(0,"ion-content",0)(1,"ion-refresher",1),e.NdJ("ionRefresh",function(x){return a.handleRefresh(x)}),e._UZ(2,"ion-refresher-content"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"img",5),e.qZA(),e.TgZ(7,"div",6),e._uU(8),e.qZA()()(),e.TgZ(9,"div",7),e._uU(10),e.qZA()()),2&n&&(e.xp6(8),e.Oqu(a.statusText),e.xp6(2),e.hij(" v ",a.appVersion," "))},dependencies:[i.W2,i.nJ,i.Wo],styles:[".splash-background[_ngcontent-%COMP%]{--background: #11cc97;width:100%;position:relative}.container[_ngcontent-%COMP%]{display:flex;height:100%;justify-content:center;align-items:center}.logo[_ngcontent-%COMP%]{width:250px;margin-top:-30px;text-align:center}.logo[_ngcontent-%COMP%]   .logo-image[_ngcontent-%COMP%]{width:170px;margin:auto}.below-text[_ngcontent-%COMP%]{font-size:24px;color:#fff;margin-top:15px}.company-logo[_ngcontent-%COMP%]{width:150px;position:absolute;bottom:30px;margin-left:auto;margin-right:auto;left:0px;right:0px}"]}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.Bz.forChild(v),g.Bz]}),o})(),P=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[r.ez,p.u5,i.Pc,y]}),o})()},5014:(f,u,t)=>{t.d(u,{V:()=>h});var r=t(655);const i=(0,t(7423).fo)("Preferences",{web:()=>t.e(8359).then(t.bind(t,8359)).then(s=>new s.PreferencesWeb)});var g=t(8274);let h=(()=>{class s{constructor(){}store(e,d){return(0,r.mG)(this,void 0,void 0,function*(){const m=btoa(escape(JSON.stringify(d)));yield i.set({key:e,value:m})})}get(e){return(0,r.mG)(this,void 0,void 0,function*(){const d=yield i.get({key:e});try{return JSON.parse(unescape(atob(d.value)))}catch(m){return!1}})}removeStorageItem(e){return(0,r.mG)(this,void 0,void 0,function*(){yield i.remove({key:e})})}clear(){return(0,r.mG)(this,void 0,void 0,function*(){yield i.clear()})}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=g.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);